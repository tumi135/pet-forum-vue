(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f829ed"],{2994:function(t,e,n){"use strict";n("68ef"),n("e3b3"),n("c0c2")},"2bdd":function(t,e,n){"use strict";var i=n("d282");function r(t){var e=window.getComputedStyle(t),n="none"===e.display,i=null===t.offsetParent&&"fixed"!==e.position;return n||i}var a=n("a8c1"),s=n("5fbe"),o=n("543e"),c=Object(i["a"])("list"),u=c[0],l=c[1],h=c[2];e["a"]=u({mixins:[Object(s["a"])((function(t){this.scroller||(this.scroller=Object(a["d"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,n=t.$el,i=t.scroller,a=t.offset,s=t.direction;e=i.getBoundingClientRect?i.getBoundingClientRect():{top:0,bottom:i.innerHeight};var o=e.bottom-e.top;if(!o||r(n))return!1;var c=!1,u=t.$refs.placeholder.getBoundingClientRect();c="up"===s?e.top-u.top<=a:u.bottom-e.bottom<=a,c&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{class:l("loading"),key:"loading"},[this.slots("loading")||t(o["a"],{attrs:{size:"16"}},[this.loadingText||h("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:l("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:l("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",class:l("placeholder")});return t("div",{class:l(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},"474e":function(t,e,n){"use strict";var i=n("66bc"),r=n.n(i);r.a},"48f4":function(t,e,n){"use strict";function i(t,e){var n=e.to,i=e.url,r=e.replace;if(n&&t){var a=t[r?"replace":"push"](n);a&&a.catch&&a.catch((function(t){if(t&&"NavigationDuplicated"!==t.name)throw t}))}else i&&(r?location.replace(i):location.href=i)}function r(t){i(t.parent&&t.parent.$router,t.props)}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return a}));var a={url:String,replace:Boolean,to:[String,Object]}},5246:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("8a0b")},"58e6":function(t,e,n){"use strict";var i=n("d282"),r=n("1325"),a=n("a8c1"),s=n("3875"),o=n("543e"),c=Object(i["a"])("pull-refresh"),u=c[0],l=c[1],h=c[2],d=50,f=["pulling","loosing","success"];e["a"]=u({mixins:[s["a"]],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:d}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(this.headHeight!==d)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(a["d"])(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(a["c"])(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(Object(r["c"])(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick((function(){t.$emit("refresh")}))):this.setStatus(0))},ease:function(t){var e=+this.headHeight;return t>e&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)},setStatus:function(t,e){var n;n=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing",this.distance=t,n!==this.status&&(this.status=n)},genStatus:function(){var t=this.$createElement,e=this.status,n=this.distance,i=this.slots(e,{distance:n});if(i)return i;var r=[],a=this[e+"Text"]||h(e);return-1!==f.indexOf(e)&&r.push(t("div",{class:l("text")},[a])),"loading"===e&&r.push(t(o["a"],{attrs:{size:"16"}},[a])),r},showSuccessTip:function(){var t=this;this.status="success",setTimeout((function(){t.setStatus(0)}),this.successDuration)}},render:function(){var t=arguments[0],e={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:l()},[t("div",{ref:"track",class:l("track"),style:e},[t("div",{class:l("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}})},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"66bc":function(t,e,n){},"6ab3":function(t,e,n){},"6b41":function(t,e,n){"use strict";var i=n("2638"),r=n.n(i),a=n("d282"),s=n("a142"),o=n("ba31"),c=n("b1d2"),u=n("ad06"),l=Object(a["a"])("nav-bar"),h=l[0],d=l[1];function f(t,e,n,i){var a;function l(){return n.left?n.left():[e.leftArrow&&t(u["a"],{class:d("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:d("text")},[e.leftText])]}function h(){return n.right?n.right():e.rightText?t("span",{class:d("text")},[e.rightText]):void 0}return t("div",r()([{style:{zIndex:e.zIndex},class:[d({fixed:e.fixed}),(a={},a[c["b"]]=e.border,a)]},Object(o["b"])(i)]),[t("div",{class:d("left"),on:{click:i.listeners["click-left"]||s["f"]}},[l()]),t("div",{class:[d("title"),"van-ellipsis"]},[n.title?n.title():e.title]),t("div",{class:d("right"),on:{click:i.listeners["click-right"]||s["f"]}},[h()])])}f.props={title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0}},e["a"]=h(f)},"72e1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"文章正文","left-text":"首页","left-arrow":""},on:{"click-left":t.onReturn}}),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("article-item",{attrs:{"article-item":t.articleItem,"comment-show":t.commentOpen,type:"article"},on:{changePriceSon:t.changePriceFater,"update:commentShow":function(e){t.commentOpen=e},"update:comment-show":function(e){t.commentOpen=e}}}),n("div",{staticClass:"list"},[n("p",[t._v("评论列表")]),n("van-list",{staticClass:"commentList",attrs:{offset:100,finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},on:{load:t.initCommentList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(t){return n("outside-comment",{key:t.id+"comment",attrs:{"comment-item":t}})})),1)],1)],1),n("div",{staticClass:"footer van-hairline--top"},[n("van-button",{on:{click:function(e){t.commentOpen=!0}}},[n("van-icon",{attrs:{name:"chat-o"}}),t._v("评论 ")],1),n("van-button",{on:{click:t.changePraise}},[t.articleItem.praise?n("van-icon",{attrs:{name:"good-job",color:"#FFA500"}}):n("van-icon",{attrs:{name:"good-job-o"}}),t._v(" 点赞 ")],1)],1),n("write-comment",{attrs:{"comment-show":t.commentOpen,"reply-tid":t.articleId},on:{"update:commentShow":function(e){t.commentOpen=e},"update:comment-show":function(e){t.commentOpen=e}}})],1)},r=[],a=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("66b9"),n("b650")),s=(n("5246"),n("6b41")),o=(n("ab71"),n("58e6")),c=(n("2994"),n("2bdd")),u=n("ade3"),l=(n("96cf"),n("1da1")),h=n("2f62"),d=n("845e");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={mixins:[d["a"]],data:function(){return{articleId:null,articleItem:{},refreshing:!1,loading:!1,finished:!1,commentOpen:!1,commentList:[],page:1,perpage:5}},created:function(){this.articleId=this.$route.query.article_id,this.commentOpen=!(!this.$route.query.comment||"true"!=this.$route.query.comment),this.initArticle(),this.initCommentList()},methods:{initArticle:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.articleId!=this.clickArticle.id){t.next=3;break}return this.articleItem=this.clickArticle,t.abrupt("return");case 3:return t.next=5,this.$api.getArticle(this.articleId).catch((function(t){return console.log(t),n.$toast.fail("数据获取失败"),"文章获取失败"}));case 5:e=t.sent,this.condonAvatarAndPraise(e.data.data);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCommentList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$api.commentFreeQuery(this.page,this.perpage,this.articleId).catch((function(t){return console.log(t),"评论获取失败"}));case 3:e=t.sent,n=e.data.list||[],this.refreshing=!1,n.length<this.perpage&&(this.finished=!0),e.data.list&&(this.page+=1,i=e.data.list.map((function(t){return t.uid})),this.condonAvatar(i,n));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),condonAvatarAndPraise:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("文章获取失败"!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$api.praiseFreeQuery(1,500,this.articleId).catch((function(t){return console.log(t),r.$toast.fail("数据获取失败"),"获取失败"}));case 4:return n=t.sent,t.next=7,this.$api.userMultiProfile([e.user_id]).catch((function(t){return console.log(t),r.$toast.fail("数据获取失败"),"获取失败"}));case 7:i=t.sent,n.data.list.length>=1?e.praise=!0:e.praise=!1,i.data.info_list.length>=1&&(e.avatar=i.data.info_list[0].ext_info.yesapi_avatar),this.articleItem=e;case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),condonAvatar:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,n){var i,r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.userMultiProfile(e).catch((function(t){return console.log(t),a.$toast.fail("数据获取失败"),"获取失败"}));case 2:i=t.sent,i.data.info_list&&(r=i.data.info_list,console.log(r),n.forEach((function(t){var e=r.filter((function(e){return e.uid==t.user_id}));t.avatar=e[0].ext_info.yesapi_avatar}))),this.commentList=this.commentList.concat(n),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),changePriceFater:function(t){t?this.articleItem.praise_num+=1:this.articleItem.praise_num-=1,this.articleItem.praise=t},changePraiseStyle:function(t){"success"===t&&(this.articleItem.praise?(this.articleItem.praise_num-=1,this.articleItem.praise=!1):(this.articleItem.praise_num+=1,this.articleItem.praise=!0))},onRefresh:function(){this.page=1,this.commentList=[],this.initCommentList()},onReturn:function(){this.$router.push("/")}},computed:p({},Object(h["c"])(["clickArticle"])),components:{"van-list":c["a"],"van-pull-refresh":o["a"],"van-nav-bar":s["a"],"article-item":function(){return Promise.all([n.e("chunk-4d1b3240"),n.e("chunk-533d4bc0")]).then(n.bind(null,"7476"))},"write-comment":function(){return n.e("chunk-97496334").then(n.bind(null,"eed9"))},"outside-comment":function(){return n.e("chunk-bc622866").then(n.bind(null,"2730"))},"van-button":a["a"]}},g=m,b=(n("474e"),n("2877")),v=Object(b["a"])(g,i,r,!1,null,"5ed28417",null);e["default"]=v.exports},"845e":function(t,e,n){"use strict";n("96cf");var i=n("1da1"),r={debounce:function(t,e){var n;return e=e||500,function(){var i=this,r=arguments;n?(clearTimeout(n),n=setTimeout((function(){n=null}),e)):(t.apply(i,r),n=setTimeout((function(){n=null}),e))}},throttle:function(t,e){var n;return e=e||500,function(){var i=this,r=arguments;n||(t.apply(i,r),n=setTimeout((function(){n=null}),e))}}},a=r;n.d(e,"a",(function(){return s}));var s={methods:{changePraise:a.debounce((function(){this.articleItem.praise?this.deletePraise():this.createPraise()}),1e3),createPraise:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.createPraise(this.articleItem.id).catch((function(t){return console.log(t),"err"}));case 2:e=t.sent,"success"==e?this.changePraiseStyle(e):401==e.ret&&this.$toast.fail(e.data.err_msg);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deletePraise:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.deletePraise(this.articleItem.id).catch((function(t){return console.log(t),"err"}));case 2:e=t.sent,"success"==e?this.changePraiseStyle(e):401==e.ret&&this.$toast.fail(e.data.err_msg);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}}},"8a0b":function(t,e,n){},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),a=n("e8b5"),s=n("861d"),o=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),h=n("1dde"),d=n("b622"),f=n("2d00"),p=d("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",b=f>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=h("concat"),x=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},y=!b||!v;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,i,r,a,s=o(this),h=l(s,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(a=-1===e?s:arguments[e],x(a)){if(r=c(a.length),d+r>m)throw TypeError(g);for(n=0;n<r;n++,d++)n in a&&u(h,d,a[n])}else{if(d>=m)throw TypeError(g);u(h,d++,a)}return h.length=d,h}})},ab71:function(t,e,n){"use strict";n("68ef"),n("e3b3"),n("6ab3")},b1d2:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return l}));var i="#fff",r="van-hairline",a=r+"--top",s=r+"--left",o=r+"--bottom",c=r+"--surround",u=r+"--top-bottom",l=r+"-unset--top-bottom"},b650:function(t,e,n){"use strict";var i=n("c31d"),r=n("2638"),a=n.n(r),s=n("d282"),o=n("ba31"),c=n("b1d2"),u=n("48f4"),l=n("ad06"),h=n("543e"),d=Object(s["a"])("button"),f=d[0],p=d[1];function m(t,e,n,i){var r,s=e.tag,d=e.icon,f=e.type,m=e.color,g=e.plain,b=e.disabled,v=e.loading,x=e.hairline,y=e.loadingText,S={};function k(t){v||b||(Object(o["a"])(i,"click",t),Object(u["a"])(i))}function w(t){Object(o["a"])(i,"touchstart",t)}m&&(S.color=g?m:c["h"],g||(S.background=m),-1!==m.indexOf("gradient")?S.border=0:S.borderColor=m);var O=[p([f,e.size,{plain:g,loading:v,disabled:b,hairline:x,block:e.block,round:e.round,square:e.square}]),(r={},r[c["d"]]=x,r)];function T(){var i,r=[];return v?r.push(t(h["a"],{class:p("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):d&&r.push(t(l["a"],{attrs:{name:d},class:p("icon")})),i=v?y:n.default?n.default():e.text,i&&r.push(t("span",{class:p("text")},[i])),r}return t(s,a()([{style:S,class:O,attrs:{type:e.nativeType,disabled:b},on:{click:k,touchstart:w}},Object(o["b"])(i)]),[T()])}m.props=Object(i["a"])({},u["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),e["a"]=f(m)},bc1b:function(t,e,n){},c0c2:function(t,e,n){},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),s=n("ae40"),o=a("map"),c=s("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-54f829ed.0d14b14a.js.map