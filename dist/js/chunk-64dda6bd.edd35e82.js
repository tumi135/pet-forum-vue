(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64dda6bd"],{2994:function(t,e,n){"use strict";n("68ef"),n("e3b3"),n("c0c2")},"2bdd":function(t,e,n){"use strict";var i=n("d282");function r(t){var e=window.getComputedStyle(t),n="none"===e.display,i=null===t.offsetParent&&"fixed"!==e.position;return n||i}var s=n("a8c1"),o=n("5fbe"),a=n("543e"),c=Object(i["a"])("list"),u=c[0],d=c[1],h=c[2];e["a"]=u({mixins:[Object(o["a"])((function(t){this.scroller||(this.scroller=Object(s["d"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,n=t.$el,i=t.scroller,s=t.offset,o=t.direction;e=i.getBoundingClientRect?i.getBoundingClientRect():{top:0,bottom:i.innerHeight};var a=e.bottom-e.top;if(!a||r(n))return!1;var c=!1,u=t.$refs.placeholder.getBoundingClientRect();c="up"===o?e.top-u.top<=s:u.bottom-e.bottom<=s,c&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{class:d("loading"),key:"loading"},[this.slots("loading")||t(a["a"],{attrs:{size:"16"}},[this.loadingText||h("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:d("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:d("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",class:d("placeholder")});return t("div",{class:d(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},"45cf":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"评论","left-text":"首页","left-arrow":""},on:{"click-left":t.onReturn}}),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("outside-comment",{attrs:{"comment-item":t.outsideCommentItem,type:"commentItemList"}}),n("div",{staticClass:"commentList"},[n("van-list",{attrs:{offset:100,finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},on:{load:t.initCommentList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(e){return n("inside-comment",{key:e.id+"comment",attrs:{"comment-item":e,"reply-name":t.replyName,"comment-show":t.commentOpen},on:{"update:replyName":function(e){t.replyName=e},"update:reply-name":function(e){t.replyName=e},"update:commentShow":function(e){t.commentOpen=e},"update:comment-show":function(e){t.commentOpen=e}}})})),1)],1)],1),n("footer",{staticClass:"replyButton",on:{click:t.openWriteComment}},[n("div",{staticClass:"replytext "},[t._v("回复评论")])]),n("write-comment",{attrs:{"comment-show":t.commentOpen,"reply-cid":t.replyId,"reply-name":t.replyName,"reply-tid":t.outsideCommentTid,"reply-rid":t.outsideCommentItem.id,"reply-rname":t.outsideCommentItem.create_name},on:{"update:commentShow":function(e){t.commentOpen=e},"update:comment-show":function(e){t.commentOpen=e}}})],1)},r=[],s=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("d81d"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("ab71"),n("58e6")),o=(n("5246"),n("6b41")),a=(n("2994"),n("2bdd")),c=n("ade3"),u=(n("96cf"),n("1da1")),d=n("2f62");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"",data:function(){return{outsideCommentItem:{},outsideCommentRid:null,outsideCommentTid:null,refreshing:!1,loading:!1,finished:!1,commentOpen:!1,commentList:[],page:1,perpage:5,replyId:null,replyName:""}},created:function(){this.outsideCommentId=this.$route.query.comment_id,this.outsideCommentTid=this.$route.query.comment_tid,this.replyId=this.$route.query.comment_id,this.initOutsideCommentItem(),this.initCommentList()},methods:{initOutsideCommentItem:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.outsideCommentId!=this.clickComment.id){t.next=3;break}return this.outsideCommentItem=this.clickComment,t.abrupt("return");case 3:return t.next=5,this.$api.commentsOneFreeQuery(this.outsideCommentId).catch((function(t){return console.log(t),"文章获取失败"}));case 5:e=t.sent,this.condonAvatar(e.data.data);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCommentList:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$api.commentFreeQuery2(this.page,this.perpage,this.outsideCommentId).catch((function(){return"评论获取失败"}));case 3:e=t.sent,n=e.data.list||[],this.refreshing=!1,n.length<this.perpage&&(this.finished=!0),e.data.list&&(this.page+=1,i=e.data.list.map((function(t){return t.uid})),this.condonListAvatar(i,n));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),condonAvatar:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("文章获取失败"!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$api.userMultiProfile([e.uid]).catch((function(t){return console.log(t),i.$toast.fail("数据获取失败"),"获取失败"}));case 4:n=t.sent,n.data.info_list.length>=1&&(e.avatar=n.data.info_list[0].ext_info.yesapi_avatar),this.outsideCommentItem=e;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),condonListAvatar:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e,n){var i,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.userMultiProfile(e).catch((function(t){return console.log(t),s.$toast.fail("数据获取失败"),"获取失败"}));case 2:i=t.sent,i.data.info_list&&(r=i.data.info_list,n.forEach((function(t){var e=r.filter((function(e){return e.uid==t.user_id}));t.avatar=e[0].ext_info.yesapi_avatar}))),this.commentList=this.commentList.concat(n),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),onReturn:function(){this.$router.push("/")},onRefresh:function(){this.page=1,this.commentList=[],this.initCommentList(),this.refreshing=!1},openWriteComment:function(){this.replyId=this.$route.query.comment_id,this.commentOpen=!0}},watch:{$route:function(){this.outsideCommentId=this.$route.query.comment_id,this.outsideCommentTid=this.$route.query.comment_tid,this.replyId=this.$route.query.comment_id,this.initOutsideCommentItem(),this.initCommentList()}},computed:l({},Object(d["c"])(["clickComment"])),components:{"van-list":a["a"],"van-nav-bar":o["a"],"van-pull-refresh":s["a"],"write-comment":function(){return n.e("chunk-3c68472e").then(n.bind(null,"eed9"))},"outside-comment":function(){return n.e("chunk-bc622866").then(n.bind(null,"2730"))},"inside-comment":function(){return n.e("chunk-6d6e3b72").then(n.bind(null,"d7c7"))}}},f=m,p=(n("7cae"),n("2877")),g=Object(p["a"])(f,i,r,!1,null,"d8fa5b28",null);e["default"]=g.exports},5246:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("8a0b")},"58e6":function(t,e,n){"use strict";var i=n("d282"),r=n("1325"),s=n("a8c1"),o=n("3875"),a=n("543e"),c=Object(i["a"])("pull-refresh"),u=c[0],d=c[1],h=c[2],l=50,m=["pulling","loosing","success"];e["a"]=u({mixins:[o["a"]],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:l}},data:function(){return{status:"normal",distance:0,duration:0}},computed:{touchable:function(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},headStyle:function(){if(this.headHeight!==l)return{height:this.headHeight+"px"}}},watch:{value:function(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.slots("success")||this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted:function(){this.bindTouchEvent(this.$refs.track),this.scrollEl=Object(s["d"])(this.$el)},methods:{checkPullStart:function(t){this.ceiling=0===Object(s["c"])(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart:function(t){this.touchable&&this.checkPullStart(t)},onTouchMove:function(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(Object(r["c"])(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd:function(){var t=this;this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.$emit("input",!0),this.$nextTick((function(){t.$emit("refresh")}))):this.setStatus(0))},ease:function(t){var e=+this.headHeight;return t>e&&(t=t<2*e?e+(t-e)/2:1.5*e+(t-2*e)/4),Math.round(t)},setStatus:function(t,e){var n;n=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing",this.distance=t,n!==this.status&&(this.status=n)},genStatus:function(){var t=this.$createElement,e=this.status,n=this.distance,i=this.slots(e,{distance:n});if(i)return i;var r=[],s=this[e+"Text"]||h(e);return-1!==m.indexOf(e)&&r.push(t("div",{class:d("text")},[s])),"loading"===e&&r.push(t(a["a"],{attrs:{size:"16"}},[s])),r},showSuccessTip:function(){var t=this;this.status="success",setTimeout((function(){t.setStatus(0)}),this.successDuration)}},render:function(){var t=arguments[0],e={transitionDuration:this.duration+"ms",transform:this.distance?"translate3d(0,"+this.distance+"px, 0)":""};return t("div",{class:d()},[t("div",{ref:"track",class:d("track"),style:e},[t("div",{class:d("head"),style:this.headStyle},[this.genStatus()]),this.slots()])])}})},"6ab3":function(t,e,n){},"6b41":function(t,e,n){"use strict";var i=n("2638"),r=n.n(i),s=n("d282"),o=n("a142"),a=n("ba31"),c=n("b1d2"),u=n("ad06"),d=Object(s["a"])("nav-bar"),h=d[0],l=d[1];function m(t,e,n,i){var s;function d(){return n.left?n.left():[e.leftArrow&&t(u["a"],{class:l("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:l("text")},[e.leftText])]}function h(){return n.right?n.right():e.rightText?t("span",{class:l("text")},[e.rightText]):void 0}return t("div",r()([{style:{zIndex:e.zIndex},class:[l({fixed:e.fixed}),(s={},s[c["b"]]=e.border,s)]},Object(a["b"])(i)]),[t("div",{class:l("left"),on:{click:i.listeners["click-left"]||o["f"]}},[d()]),t("div",{class:[l("title"),"van-ellipsis"]},[n.title?n.title():e.title]),t("div",{class:l("right"),on:{click:i.listeners["click-right"]||o["f"]}},[h()])])}m.props={title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0}},e["a"]=h(m)},"7cae":function(t,e,n){"use strict";var i=n("92be"),r=n.n(i);r.a},"8a0b":function(t,e,n){},"92be":function(t,e,n){},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),s=n("e8b5"),o=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),d=n("65f0"),h=n("1dde"),l=n("b622"),m=n("2d00"),f=l("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",b=m>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=h("concat"),y=function(t){if(!o(t))return!1;var e=t[f];return void 0!==e?!!e:s(t)},x=!b||!v;i({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,i,r,s,o=a(this),h=d(o,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(s=-1===e?o:arguments[e],y(s)){if(r=c(s.length),l+r>p)throw TypeError(g);for(n=0;n<r;n++,l++)n in s&&u(h,l,s[n])}else{if(l>=p)throw TypeError(g);u(h,l++,s)}return h.length=l,h}})},ab71:function(t,e,n){"use strict";n("68ef"),n("e3b3"),n("6ab3")},b1d2:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return d}));var i="#fff",r="van-hairline",s=r+"--top",o=r+"--left",a=r+"--bottom",c=r+"--surround",u=r+"--top-bottom",d=r+"-unset--top-bottom"},c0c2:function(t,e,n){},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,s=n("1dde"),o=n("ae40"),a=s("map"),c=o("map");i({target:"Array",proto:!0,forced:!a||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-64dda6bd.edd35e82.js.map